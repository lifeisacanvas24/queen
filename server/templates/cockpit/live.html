{# queen/server/templates/cockpit/live.html #}
{% extends "_layouts/base.html" %}
{% block title %}Queen Cockpit — Live{% endblock %}
{% set page_id = "live" %}

{% block top %}
  <h1 class="title">
    Queen Cockpit — <span class="q-muted">Live</span>
    <span id="sessionBadge" class="session-badge">—</span>
  </h1>
{% endblock %}

{% block content %}
<div class="q-box p-4">

  <!-- Controls -->
  <div class="is-flex is-justify-content-space-between is-align-items-center mb-4">
    <div class="is-flex is-align-items-center" style="gap:0.75rem; flex-wrap:wrap">

      <input
        id="symbols"
        class="input mono"
        style="width:300px"
        placeholder="Symbols (comma) or ALL"
      >

      <div class="select">
        <select id="interval">
          <option value="5">5m</option>
          <option value="15" selected>15m</option>
          <option value="30">30m</option>
          <option value="60">60m</option>
        </select>
      </div>

      <div class="select">
        <select id="book"></select>
      </div>

      <label class="ml-2">Sort by Early</label>
      <label class="switch">
        <input type="checkbox" id="sortEarlyToggle">
        <span class="slider"></span>
      </label>
    </div>

    <div class="is-flex" style="gap:0.75rem">
      <button id="startBtn" class="button q-primary">Start</button>
      <button id="stopBtn" class="button is-light">Stop</button>
    </div>
  </div>

  <!-- Grid -->
  <div id="liveGrid" class="card-grid"></div>
</div>
{% endblock %}
{% block scripts %}
<script>
  window.addEventListener('load', () => {
    if (window.qs && typeof qs.initLivePage === 'function') {
      qs.initLivePage({
        gridId: 'liveGrid',
        intervalId: 'interval',
        bookId: 'book',
        symbolsId: 'symbols',
        sortEarlyId: 'sortEarlyToggle',
        startBtnId: 'startBtn',
        stopBtnId: 'stopBtn',
        tickSec: 12,
      });
    } else {
      console.warn('qs.initLivePage missing');
    }
  });
</script>
{% endblock %}
